# BBoard - Доска объявлений на Django

Проект представляет собой веб-приложение "Доска объявлений", разработанное на Django. Включает в себя бэкенд-API на Django REST Framework (DRF) и отдельное клиентское приложение на Angular для демонстрации работы API.

## Основные возможности

### Для всех пользователей
- **Просмотр объявлений:** На главной странице отображаются 10 последних объявлений.
- **Рубрикация:** Объявления организованы в иерархические рубрики (Надрубрики, например "Транспорт", и Подрубрики, например "Машины", "Автобусы").
- **Комментирование:** Незарегистрированные пользователи могут оставлять комментарии, пройдя проверку CAPTCHA.

### Для зарегистрированных пользователей
- **Аутентификация:** Регистрация, вход и выход из системы, сброс пароля.
- **Управление объявлениями:** Добавление, редактирование и удаление собственных объявлений.
- **Комментирование:** Возможность оставлять комментарии без CAPTCHA.

### Системные особенности
- **Разграничение прав (RBAC):** Разделение пользователей по ролям (например, обычные пользователи, модераторы, администраторы).
- **Административная панель:** Стандартная панель администратора Django для управления контентом и пользователями.
- **REST API:** Полноценный API для работы с объявлениями и комментариями.
- **Docker-контейнеризация:** Все сервисы (Django, Angular, БД) запускаются через Docker Compose.

## Технологический стек

### Бэкенд (Django)
- **Фреймворк:** Django
- **База данных:** PostgreSQL
- **API:** Django REST Framework (DRF)
- **Аутентификация:** Стандартная Django Auth + сессии для браузера
- **Задачи:** Отправка email-уведомлений (выводятся в консоль)

### Фронтенд (Angular)
- **Фреймворк:** Angular
- **Назначение:** Клиент для тестирования и демонстрации возможностей Django REST API.

### Инфраструктура
- **Контейнеризация:** Docker, Docker Compose

## Быстрый старт

Для запуска проекта необходим установленный **Docker** и **Docker Compose**.

1.  **Клонируйте репозиторий:**
    ```bash
    git clone git@github.com:aza1iya-yu/bboard.git
    cd bboard
    ```

2.  **Соберите и запустите контейнеры:**
    ```bash
    docker-compose up --build
    ```
    Эта команда выполнит сборку образов, создаст контейнеры и запустит их. При первом запуске это может занять несколько минут.
    Создается суперпользователь, пароль можно изменить в ```docker-compose.yaml```.

3.  **Проект будет доступен по адресам:**
    - **Основной сайт (Django):** http://localhost:8000
    - **Клиент (Angular):** http://localhost:4200
    - **Админ-панель Django:** http://localhost:8000/admin

## Работа с системой

### Регистрация и вход
- Перейдите на http://localhost:8000.
- Для регистрации нового аккаунта используйте соответствующую ссылку.
- **Важно:** Ссылки для активации аккаунта и сброса пароля не отправляются на реальную почту. Текст письма с ссылкой будет выведен в консоль (терминал), где работает команда `docker-compose up`. Скопируйте ссылку из консоли и вставьте в браузер.

### Добавление объявления
1.  Авторизуйтесь на сайте.
2.  Нажмите "Добавить объявление".
3.  Заполните форму, выбрав соответствующие рубрики.

### Работа с API через Angular-клиент
- Angular-клиент на http://localhost:4200 автоматически подключится к Django API на http://localhost:8000.
- Используйте его для просмотра списка объявлений, деталей объявления и комментариев в формате SPA (Single Page Application).

### Прямая работа с API (через HTTP-клиент)
Вы можете тестировать API напрямую, используя инструменты like Postman или curl.

**Примеры эндпоинтов:**
- `GET http://localhost:8000/api/bbs/` - Список объявлений.
- `GET http://localhost:8000/api/bbs/1/` - Детали объявления с ID=1.
- `GET http://localhost:8000/api/bbs/1/comments/` - Комментарии к объявлению с ID=1.

## Администрирование

Для управления рубриками, пользователями и модерирования объявлений используйте админ-панель Django: http://localhost:8000/admin. Войдите под учетной записью суперпользователя, созданной на этапе настройки.

## Дополнительные команды Docker Compose

- **Остановка всех сервисов:** `docker-compose down`
- **Просмотр логов:** `docker-compose logs -f` (для просмотра в реальном времени, включая "электронные письма")

## Разработка

Если вы планируете развивать проект, вам может быть удобнее работать с кодом вне контейнеров.

### Запуск для разработки (без Docker)
1.  Установите зависимости Python (желательно в виртуальном окружении): `pip install -r requirements.txt`
2.  Установите и запустите PostgreSQL.
3.  Настройте подключение к БД в `bboard/settings.py`.
4.  Выполните миграции: `python manage.py migrate`
5.  Запустите сервер: `python manage.py runserver`

Для разработки Angular-клиента перейдите в папку `bbclient` и используйте стандартные команды Angular CLI (`ng serve`).

## Работа с системой

### Регистрация и вход
- Перейдите на http://localhost:8000.
- Для регистрации нового аккаунта используйте соответствующую ссылку.
- **Важно:** Ссылки для активации аккаунта и сброса пароля не отправляются на реальную почту. Текст письма с ссылкой будет выведен в консоль (терминал), где работает команда `docker-compose up`. Скопируйте ссылку из консоли и вставьте в браузер.

### Добавление объявления
1.  Авторизуйтесь на сайте.
2.  Нажмите "Добавить объявление".
3.  Заполните форму, выбрав соответствующие рубрики.

### Работа с API через Angular-клиент
- Angular-клиент на http://localhost:4200 автоматически подключится к Django API на http://localhost:8000.
- Используйте его для просмотра списка объявлений, деталей объявления и комментариев в формате SPA (Single Page Application).

### Прямая работа с API (через HTTP-клиент)
Вы можете тестировать API напрямую, используя инструменты like Postman или curl.

**Примеры эндпоинтов:**
- `GET http://localhost:8000/api/advertisements/` - Список объявлений.
- `GET http://localhost:8000/api/advertisements/1/` - Детали объявления с ID=1.
- `GET http://localhost:8000/api/advertisements/1/comments/` - Комментарии к объявлению с ID=1.

**Аутентификация в API:**
- Для операций, требующих аутентификации (добавление, изменение), используйте Token Authentication.
- Получить токен можно по эндпоинту `POST /api-token-auth/`, передав `username` и `password`.

## Администрирование

Для управления рубриками, пользователями и модерирования объявлений используйте админ-панель Django: http://localhost:8000/admin. Войдите под учетной записью суперпользователя, созданной на этапе настройки.

## Дополнительные команды Docker Compose

- **Остановка всех сервисов:** `docker-compose down`
- **Просмотр логов:** `docker-compose logs -f` (для просмотра в реальном времени, включая "электронные письма")

---
Разработано на Django с использованием Docker.
